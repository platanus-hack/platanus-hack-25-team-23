# Task: Verify and Finalize Deep Agent Implementation

- [ ] Verify Build <!-- id: 0 -->
    - [x] Run `pnpm build` <!-- id: 1 -->
    - [x] Fix build error in `SupabaseVFS.ts` <!-- id: 2 -->
    - [x] Fix `handleInputChange` error in ChatView
- [x] Fix `append` is not a function error (import issue)
- [x] Fix 500 Internal Server Error (streaming format)
- [x] Move Deep Agent to `/agent` route
- [x] Revert `/new-query` to original state
- [x] Pull upstream changes
- [x] Create migration for `notes` and `edges` tables
- [x] Update `sync.ts` to use new schemaion <!-- id: 3 -->
    - [x] Confirm VFS migration instructions are clear <!-- id: 4 -->
- [x] Run Database Migration <!-- id: 5 -->
- [x] Migrate to `deepagents` SDK <!-- id: 6 -->
    - [x] Create standalone test script (`test-deepagent.ts`) <!-- id: 7 -->
    - [x] Implement LangChain-compatible VFS tools <!-- id: 8 -->
    - [x] Verify agent execution in test script <!-- id: 9 -->
    - [x] Update `src/app/api/chat/route.ts` <!-- id: 10 -->
- [x] Migrate to AI Elements UI
    - [x] Install `ai-elements` components
    - [x] Refactor `ChatView` to use `ai-elements`
    - [x] Implement `useManualChat` hook for reliable streaming
    - [x] Fix token streaming (switch to `streamEvents`)
    - [x] Verify end-to-end functionality
